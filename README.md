# USDP stablecoin core

In the project directory, you can run:

### `yarn build`


Compiles all the contracts and saves artifacts.<br />

### `yarn test`


Runs the test for the contracts and screens gas usage.<br />


### Gas estimation

```·--------------------------------------------------------|---------------------------|-------------|----------------------------·
   |          Solc version: 0.6.10+commit.00c0fcaf          ·  Optimizer enabled: true  ·  Runs: 200  ·  Block limit: 6721975 gas  │
   ·························································|···························|·············|·····························
   |  Methods                                               ·               39 gwei/gas               ·       240.37 usd/eth       │
   ······················|··································|·············|·············|·············|··············|··············
   |  Contract           ·  Method                          ·  Min        ·  Max        ·  Avg        ·  # calls     ·  usd (avg)  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setCollateral                   ·      82851  ·     102051  ·      89251  ·           6  ·       0.84  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setColPartRange                 ·          -  ·          -  ·      35341  ·           2  ·       0.33  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setLiquidationFee               ·          -  ·          -  ·      45626  ·           2  ·       0.43  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setManager                      ·          -  ·          -  ·      46449  ·           2  ·       0.44  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setMinCollateralizationPercent  ·          -  ·          -  ·      45725  ·           2  ·       0.43  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setOracleType                   ·          -  ·          -  ·      46157  ·           6  ·       0.43  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setStabilityFee                 ·          -  ·          -  ·      45594  ·           2  ·       0.43  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setTokenDebtLimit               ·          -  ·          -  ·      45695  ·           1  ·       0.43  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Parameters         ·  setVaultAccess                  ·          -  ·          -  ·      46426  ·           6  ·       0.44  │
   ······················|··································|·············|·············|·············|··············|··············
   |  VaultManager       ·  exit                            ·          -  ·          -  ·     248266  ·           1  ·       2.33  │
   ······················|··································|·············|·············|·············|··············|··············
   |  VaultManager       ·  join                            ·          -  ·          -  ·     246258  ·           2  ·       2.31  │
   ······················|··································|·············|·············|·············|··············|··············
   |  VaultManager       ·  repayAll                        ·          -  ·          -  ·      82228  ·           2  ·       0.77  │
   ······················|··································|·············|·············|·············|··············|··············
   |  VaultManager       ·  spawn                           ·          -  ·          -  ·     413221  ·           5  ·       3.87  │
   ······················|··································|·············|·············|·············|··············|··············
   |  WETH               ·  approve                         ·          -  ·          -  ·      43944  ·           4  ·       0.41  │
   ······················|··································|·············|·············|·············|··············|··············
   |  WETH               ·  deposit                         ·          -  ·          -  ·      43610  ·           4  ·       0.41  │
   ······················|··································|·············|·············|·············|··············|··············
   |  Deployments                                           ·                                         ·  % of limit  ·             │
   ·························································|·············|·············|·············|··············|··············
   |  Liquidator                                            ·     567874  ·     567886  ·     567883  ·       8.4 %  ·       5.32  │
   ·························································|·············|·············|·············|··············|··············
   |  Parameters                                            ·     906212  ·     906224  ·     906223  ·      13.5 %  ·       8.50  │
   ·························································|·············|·············|·············|··············|··············
   |  UniswapOracle                                         ·          -  ·          -  ·     577605  ·       8.6 %  ·       5.41  │
   ·························································|·············|·············|·············|··············|··············
   |  UniswapV2Router02                                     ·          -  ·          -  ·    3862133  ·      57.5 %  ·      36.21  │
   ·························································|·············|·············|·············|··············|··············
   |  USDP                                                  ·          -  ·          -  ·     759875  ·      11.3 %  ·       7.12  │
   ·························································|·············|·············|·············|··············|··············
   |  Vault                                                 ·          -  ·          -  ·    1632205  ·      24.3 %  ·      15.30  │
   ·························································|·············|·············|·············|··············|··············
   |  VaultManager                                          ·    1168919  ·    1168931  ·    1168925  ·      17.4 %  ·      10.96  │
   ·--------------------------------------------------------|-------------|-------------|-------------|--------------|-------------·
```

### Test coverage

```
--------------------|----------|----------|----------|----------|----------------|
File                |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
--------------------|----------|----------|----------|----------|----------------|
 contracts/         |    97.22 |    72.37 |     96.3 |    97.86 |                |
  Liquidator.sol    |       95 |    66.67 |      100 |      100 |                |
  Parameters.sol    |      100 |       50 |      100 |      100 |                |
  USDP.sol          |    96.43 |    91.67 |    90.91 |    96.43 |             74 |
  UniswapOracle.sol |      100 |       50 |      100 |      100 |                |
  Vault.sol         |    97.22 |       50 |    92.31 |    97.67 |            205 |
  VaultManager.sol  |    96.15 |    78.95 |      100 |    96.08 |        124,132 |
--------------------|----------|----------|----------|----------|----------------|
All files           |    97.22 |    72.37 |     96.3 |    97.86 |                |
--------------------|----------|----------|----------|----------|----------------|
```
